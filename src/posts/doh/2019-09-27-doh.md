---
title:  "Personal DoH Server"
tags: ["web", "linux", "dns"]
demo: "https://github.com/ndom91/dns.ndo.dev"
---

# DNS-over-HTTPS

With all the hype surrounding DNS-over-HTTPS (DoH), I wanted to try it out for myself and see what it was all about. 

Some background: I've had a Raspberry Pi running [`pi-hole`](https://pi-hole.net) in my basement for the past year or so, and that did a pretty good job of blocking ads and keeping my DNS queries private, but only inside the home.. 

I wanted to have this same privacy, performance, and control outside of the house as well. 



### New Server

I recently scraped together some parts and continued to build out my "homelab" setup. This most recent addition consisted of a 1U Supermicro Chassis housing an Intel X3480 @ 3 Ghz, 16gb of RAM, and 3TB of storage. Not a monster, but enough to do some plex streaming and hosting the odd web service. 

I was lucky enough that my employer has some rack space to offer me, so I was able to house it there and even get a public IP!



# dns-over-https + unbound

Anyway, back to the main story - DoH. 

It seems the world is moving towards DoH as the solution for private, ssl encrypted DNS and I wanted in! 

I found this fantastic tutorial by Ben Tasker using [`github.com/m13253/dns-over-https`](https://github.com/m13253/dns-over-https) and [`Unbound`](https://nlnetlabs.nl/projects/unbound/about/) together. 

> Source: https://www.bentasker.co.uk/documentation/linux/407-building-and-running-your-own-dns-over-https-server

Not only am I able to control my own DNS Resolver for all my devices now, at home or on the road. But I'm also able to control things such as ad-blocking ;) 

### Result

You can find the server landing page at [`dns.ndo.dev`](https://dns.ndo.dev)

If you have a DoH client of your own and want to try it out, set your server address to: `https://dns.ndo.dev/dns-query` 

You can test it out for yourself via curl, like such: 

```bash
curl -s "https://dns.ndo.dev/dns-query?name=google.com&type=A" | python -m json.tool
```

